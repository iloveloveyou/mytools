[mysqld_multi]
mysqld = /opt/tools/percona5.6.12rc2/bin/mysqld_safe
mysqladmin = /opt/tools/percona5.6.12rc2/bin/mysqladmin
user = root


[mysqld6]
#skip-grant-tables
federated
explicit_defaults_for_timestamp
#numa-interleave
#socket = /opt/data/percona/3316/3316.sock
socket = /tmp/mysql.sock
port = 3306
pid-file = /opt/data/percona/3316/3316.pid
datadir = /opt/data/percona/3316
log_error = /opt/data/percona/3316/3316_error.log
long_query_time = 2
slow-query-log = /opt/data/percona/3316/slowquery_3316.log
user = zhangjl
collation-server=utf8_general_ci
skip-name-resolve
default-storage-engine=INNODB
max_allowed_packet=50M
wait_timeout=28800
interactive_timeout = 28800
max_connections = 2000
back_log = 20000

#memcached
#daemon_memcached_enable_binlog=1


##########innodb configure
#innodb_data_file_path = ibdata1:10M:autoextend
innodb_buffer_pool_instances=2
innodb_buffer_pool_size=2G
innodb_log_buffer_size = 1m
innodb_log_file_size=256M
innodb_lock_wait_timeout=20

#innodb io
innodb_file_per_table = 1
innodb_open_files=1000 #不用设置过大
innodb_io_capacity=600
innodb_flush_log_at_trx_commit=0
innodb_use_native_aio=1
innodb_flush_method=O_DIRECT
innodb_max_dirty_pages_pct=50
#innodb_log_files_in_group=3

#innodb_thread_concurrency=6
innodb_read_io_threads=12
innodb_write_io_threads=4
innodb_rollback_on_timeout=ON
innodb_stats_on_metadata = OFF
innodb_purge_threads = 1
innodb_purge_batch_size = 100
innodb_lock_wait_timeout=20
sync_binlog=10

#设置为1能提高性能，但是相应的也会消耗内存，需要权衡好
#innodb_adaptive_hash_index = 1

query_cache_type = 1
query_cache_size = 36M
query_cache_limit = 8M
query_cache_min_res_unit = 2K
join_buffer_size = 1M
sort_buffer_size = 32768
read_buffer_size = 32768
thread_cache_size = 32
#table_cache = 1024
max_heap_table_size = 3072M
tmp_table_size = 3072M
key_buffer_size = 12M
concurrent_insert=2
max_prepared_stmt_count = 66382 

##MASTER-SLAVE:
log_bin_trust_function_creators=1
#log-bin
#log-bin = /data/percona/3316/log_bin
#binlog_format = mixed
#binlog-ignore-db = mysql
#binlog-ignore-db = test
 
#server-id=1
#master-host = db31
#master-user = replication
#master-password = 123456
#master-port = 3316
#master-connect-retry = 5
#expire_logs_days = 10
#max_binlog_size = 200M
#auto_increment_increment=2
#auto_increment_offset=1
#log_bin_trust_function_creators=1

explicit_defaults_for_timestamp
#loose-daemon_memcached_option= -p11222
#daemon_memcached_enable_binlog=1


# to allow handlersocket accept many concurrent connections, make open_files_limit as large as possible.
open_files_limit =65535
loose_handlersocket_port = 9998                  #the port number to bind to (for read requests)
loose_handlersocket_port_wr = 9999               #the port number to bind to (for write requests)
loose_handlersocket_threads = 16                 #the number of worker threads (for read requests)
loose_handlersocket_threads_wr = 1               #the number of worker threads (for write requests)






[mysqld5]
federated
#numa-interleave
explicit_defaults_for_timestamp
#daemon_memcached_enable_binlog=1
socket = /opt/data/percona/3315/3315.sock
port = 3315
pid-file = /opt/data/percona/3315/3315.pid
datadir = /opt/data/percona/3315
log_error = /opt/data/percona/3315/3315_error.log
long_query_time = 2
log-slow-queries = /opt/data/percona/3315/slowquery_3315.log
#innodb_data_file_path = ibdata1:10M:autoextend
user = zhangjl
collation-server=utf8_general_ci
skip-name-resolve
default-storage-engine=INNODB
log_bin_trust_function_creators=1
#log-bin = /opt/data/percona/3315/mysql-bin
#binlog_format = mixed
max_allowed_packet=10M
wait_timeout=28800
interactive_timeout = 28800
##########innod configure
max_connections = 3500
back_log = 20000
#innodb_buffer_pool_size=10000M
#innodb_log_file_size=256M
innodb_file_io_threads=8
innodb_flush_log_at_trx_commit=0
innodb_log_buffer_size = 1m
innodb_thread_concurrency=0

innodb_buffer_pool_instances=1
innodb_buffer_pool_size=2G
innodb_read_io_threads=8
innodb_write_io_threads=8

query_cache_type = 1
query_cache_size = 24M
query_cache_limit = 2M
query_cache_min_res_unit = 2K
join_buffer_size = 1M
sort_buffer_size = 1M
thread_cache_size = 8
#table_cache = 1576
max_heap_table_size = 1024M
tmp_table_size = 1024M
key_buffer_size = 128M
concurrent_insert=2


##MASTER-SLAVE:
#log-bin
##log-bin = /opt/data/percona/3315/
#binlog-ignore-db = mysql
#binlog-ignore-db = test
#server-id=1
#master-host = db31
#master-user = replication
#master-password = 123456
#master-port = 3315
#master-connect-retry = 5
#expire_logs_days = 10
#max_binlog_size = 200M
#auto_increment_increment=2
#auto_increment_offset=1
#log_bin_trust_function_creators=1


